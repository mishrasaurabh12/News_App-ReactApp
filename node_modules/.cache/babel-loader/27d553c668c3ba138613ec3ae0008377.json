{"ast":null,"code":"import _asyncToGenerator from\"/Users/saurabhmishra/Desktop/react course/newsapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/saurabhmishra/Desktop/react course/newsapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/saurabhmishra/Desktop/react course/newsapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/saurabhmishra/Desktop/react course/newsapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/saurabhmishra/Desktop/react course/newsapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/saurabhmishra/Desktop/react course/newsapp/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import NewsItem from'./NewsItem';import Spinner from'./Spinner';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var News=/*#__PURE__*/function(_Component){_inherits(News,_Component);var _super=_createSuper(News);function News(props){var _this;_classCallCheck(this,News);console.log(\"1\");_this=_super.call(this,props);_this.capitalizeFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1);};_this.fetchMoreData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({page:_this.state.page+1});url=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&category=\").concat(_this.props.category,\"&apiKey=\").concat(_this.props.apiKey,\"&page=\").concat(_this.state.page,\"&pageSize=\").concat(_this.props.pageSize);// this.setState({\n//   loading: true\n// })\n_context.next=4;return fetch(url);case 4:data=_context.sent;_context.next=7;return data.json();case 7:parsedData=_context.sent;// console.log(parsedData);\n_this.setState({articles:_this.state.articles.concat(parsedData.articles),totalArticles:parsedData.totalResults// loading: false\n});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.state={articles:[],loading:true,page:1,totalArticles:0};document.title=\"\".concat(_this.capitalizeFirstLetter(_this.props.category),\"|NewsMonkey\");return _this;}// updateUrl = async () => {\n//   console.log(\"2\");\n//   let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=a643bfc7ba45429686c7769b0f99c749&page=${this.state.page}&pageSize=${this.props.pageSize}`;\n//   this.setState({\n//     loading: true\n//   })\n//   let data = await fetch(url);\n//   let parsedData = await data.json();\n//   // console.log(parsedData);\n//   this.setState(\n//     {\n//       articles: parsedData.articles,\n//       totalArticles: parsedData.totalResults,\n//       loading: false\n//     }\n//   )\n// }\n_createClass(News,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log(\"2\");\nthis.props.setProgress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apiKey=\").concat(this.props.apiKey,\"&page=\").concat(this.state.page,\"&pageSize=\").concat(this.props.pageSize);this.setState({loading:true});_context2.next=5;return fetch(url);case 5:data=_context2.sent;this.props.setProgress(30);_context2.next=9;return data.json();case 9:parsedData=_context2.sent;this.props.setProgress(70);// console.log(parsedData);\nthis.setState({articles:parsedData.articles,totalArticles:parsedData.totalResults,loading:false});this.props.setProgress(100);case 13:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()// handleNextClick = async () => {\n//   if (!(this.state.page + 1 > Math.ceil(this.state.totalArticles / this.props.pageSize))) {\n//     let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=a643bfc7ba45429686c7769b0f99c749&page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\n//     this.setState({\n//       loading: true\n//     })\n//     let data = await fetch(url);\n//     let parsedData = await data.json();\n//     // console.log(parsedData);\n//     this.setState(\n//       {\n//         page: this.state.page + 1,\n//         articles: parsedData.articles,\n//         loading: false\n//       }\n//     )\n//   }\n//   // this.setState({\n//   //   page: this.state.page + 1\n//   // })\n//   // this.updateUrl();\n// }\n// handlePreviousClick = async () => {\n//   let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=a643bfc7ba45429686c7769b0f99c749&page=${this.state.page - 1}&pageSize=${this.props.pageSize}`;\n//   this.setState({\n//     loading: true\n//   })\n//   let data = await fetch(url);\n//   let parsedData = await data.json();\n//   // console.log(parsedData);\n//   this.setState(\n//     {\n//       page: this.state.page - 1,\n//       articles: parsedData.articles,\n//       loading: false\n//     }\n//   )\n//   // this.setState({\n//   //   page: this.state.page - 1\n//   // })\n//   // this.updateUrl();\n// }\n},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"NewsMonkey|Top-Headlines from \".concat(this.capitalizeFirstLetter(this.props.category))}),this.state.loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:this.state.articles.length,next:this.fetchMoreData,hasMore:this.state.articles.length!==this.state.totalArticles,loader:this.state.page<=Math.ceil(this.state.totalArticles/this.props.pageSize)&&/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:element.title?element.title.slice(0,45):\"\",description:element.description?element.description.slice(0,88):\"\",imageUrl:element.urlToImage?element.urlToImage:\"https://img.etimg.com/thumb/msid-91711122,width-1070,height-580,imgsize-2155739,overlay-ettech/photo.jpg\",url:element.url,author:element.author?element.author:\"Unknown\",publishedAt:new Date(element.publishedAt).toUTCString(),source:element.source.name})},element.url);})})})]});}}]);return News;}(Component);export{News as default};","map":{"version":3,"names":["React","Component","NewsItem","Spinner","InfiniteScroll","News","props","console","log","capitalizeFirstLetter","string","charAt","toUpperCase","slice","fetchMoreData","setState","page","state","url","country","category","apiKey","pageSize","fetch","data","json","parsedData","articles","concat","totalArticles","totalResults","loading","document","title","setProgress","length","Math","ceil","map","element","description","urlToImage","author","Date","publishedAt","toUTCString","source","name"],"sources":["/Users/saurabhmishra/Desktop/react course/newsapp/src/Compents/News.js"],"sourcesContent":["import React, { Component } from 'react'\nimport NewsItem from './NewsItem'\nimport Spinner from './Spinner'\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nexport default class News extends Component {\n  capitalizeFirstLetter = (string) => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n  constructor(props) {\n    console.log(\"1\");\n    super(props)\n    this.state = {\n      articles: [],\n      loading: true,\n      page: 1,\n      totalArticles: 0\n    }\n    document.title = `${this.capitalizeFirstLetter(this.props.category)}|NewsMonkey`;\n  }\n  // updateUrl = async () => {\n  //   console.log(\"2\");\n  //   let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=a643bfc7ba45429686c7769b0f99c749&page=${this.state.page}&pageSize=${this.props.pageSize}`;\n  //   this.setState({\n  //     loading: true\n  //   })\n  //   let data = await fetch(url);\n  //   let parsedData = await data.json();\n  //   // console.log(parsedData);\n  //   this.setState(\n  //     {\n  //       articles: parsedData.articles,\n  //       totalArticles: parsedData.totalResults,\n  //       loading: false\n  //     }\n  //   )\n  // }\n  async componentDidMount() {\n    // console.log(\"2\");\n    this.props.setProgress(10);\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.apiKey}&page=${this.state.page}&pageSize=${this.props.pageSize}`;\n    this.setState({\n      loading: true\n    })\n\n    let data = await fetch(url);\n    this.props.setProgress(30);\n    let parsedData = await data.json();\n    this.props.setProgress(70);\n    // console.log(parsedData);\n    this.setState(\n      {\n        articles: parsedData.articles,\n        totalArticles: parsedData.totalResults,\n        loading: false\n      }\n    )\n    this.props.setProgress(100);\n  }\n  // handleNextClick = async () => {\n  //   if (!(this.state.page + 1 > Math.ceil(this.state.totalArticles / this.props.pageSize))) {\n  //     let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=a643bfc7ba45429686c7769b0f99c749&page=${this.state.page + 1}&pageSize=${this.props.pageSize}`;\n  //     this.setState({\n  //       loading: true\n  //     })\n  //     let data = await fetch(url);\n  //     let parsedData = await data.json();\n  //     // console.log(parsedData);\n  //     this.setState(\n  //       {\n  //         page: this.state.page + 1,\n  //         articles: parsedData.articles,\n  //         loading: false\n  //       }\n  //     )\n  //   }\n  //   // this.setState({\n  //   //   page: this.state.page + 1\n  //   // })\n  //   // this.updateUrl();\n  // }\n  // handlePreviousClick = async () => {\n  //   let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=a643bfc7ba45429686c7769b0f99c749&page=${this.state.page - 1}&pageSize=${this.props.pageSize}`;\n  //   this.setState({\n  //     loading: true\n  //   })\n  //   let data = await fetch(url);\n  //   let parsedData = await data.json();\n  //   // console.log(parsedData);\n  //   this.setState(\n  //     {\n  //       page: this.state.page - 1,\n  //       articles: parsedData.articles,\n  //       loading: false\n  //     }\n  //   )\n  //   // this.setState({\n  //   //   page: this.state.page - 1\n  //   // })\n  //   // this.updateUrl();\n  // }\n  fetchMoreData = async () => {\n    this.setState({\n      page: this.state.page + 1\n    })\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.apiKey}&page=${this.state.page}&pageSize=${this.props.pageSize}`;\n    // this.setState({\n    //   loading: true\n    // })\n    let data = await fetch(url);\n    let parsedData = await data.json();\n    // console.log(parsedData);\n    this.setState(\n      {\n        articles: this.state.articles.concat(parsedData.articles),\n        totalArticles: parsedData.totalResults,\n        // loading: false\n      }\n    )\n  }\n  render() {\n    return (\n      <div className=\"container my-3\">\n        <h2 className='text-center'>{`NewsMonkey|Top-Headlines from ${this.capitalizeFirstLetter(this.props.category)}`}</h2>\n        {this.state.loading && <Spinner />}\n        <InfiniteScroll\n          dataLength={this.state.articles.length}\n          next={this.fetchMoreData}\n          hasMore={this.state.articles.length !== this.state.totalArticles}\n          loader={this.state.page<= Math.ceil(this.state.totalArticles / this.props.pageSize)&& <Spinner />}\n        >\n          <div className=\"row\">\n            {this.state.articles.map((element) => {\n              return <div className=\"col-md-4\" key={element.url}>\n                <NewsItem title={element.title ? element.title.slice(0, 45) : \"\"} description={element.description ? element.description.slice(0, 88) : \"\"} imageUrl={element.urlToImage ? element.urlToImage : \"https://img.etimg.com/thumb/msid-91711122,width-1070,height-580,imgsize-2155739,overlay-ettech/photo.jpg\"} url={element.url} author={element.author ? element.author : \"Unknown\"} publishedAt={new Date(element.publishedAt).toUTCString()} source={element.source.name} />\n              </div>\n            })}\n          </div>\n        </InfiniteScroll>\n        {/* <div className=\"d-flex justify-content-between\">\n          <button disabled={this.state.page <= 1} type=\"button\" className=\"btn btn-dark\" onClick={this.handlePreviousClick}>&#8592;previous</button>\n          <button disabled={this.state.page + 1 > Math.ceil(this.state.totalArticles / this.props.pageSize)} type=\"button\" className=\"btn btn-dark\" onClick={this.handleNextClick}>Next&#8594;</button>\n        </div> */}\n      </div>\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}